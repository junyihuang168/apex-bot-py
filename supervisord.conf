[supervisord]
nodaemon=true
logfile=/dev/null
pidfile=/tmp/supervisord.pid

; =====================
; WEB (Gunicorn)
; IMPORTANT: Supervisor expands env vars as %(ENV_VAR)s (uppercase ENV_ prefix)
; =====================
[program:web]
command=gunicorn -w 2 -k gthread -t 120 -b 0.0.0.0:%(ENV_PORT)s app:app
environment=ENABLE_WS="0",ENABLE_REST_POLL="0",ENABLE_EXCHANGE_PROTECTIVE="0"
autostart=true
autorestart=true
startsecs=2
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0

; =====================
; WORKER (WS/REST monitors)
; =====================
[program:worker]
command=python worker.py
environment=ENABLE_WS="1",ENABLE_REST_POLL="1",ENABLE_EXCHANGE_PROTECTIVE="1"
autostart=true
autorestart=true
startsecs=2
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
